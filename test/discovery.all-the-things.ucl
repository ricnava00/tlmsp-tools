context {
    id = 1
    tag = context-1
}

# This middlebox will be added by the server and will require a client
# re-connect
middlebox {
    tag = mbox1
    address = tlmsp://localhost:10002
    transparent = no
    discovered = yes
}

# This middlebox will be the first entry in the client's initial
# middlebox list
middlebox {
    tag = mbox2
    address = tlmsp://localhost:10003
    transparent = no
    discovered = no
}

# This middlebox will be the second entry in the client's initial
# middlebox list
middlebox {
    tag = mbox2
    address = tlmsp://localhost:10003
    transparent = yes
    discovered = no
}

# This middlebox will add itself to the ClientHello
middlebox {
    tag = mbox3
    address = tlmsp://localhost:10004
    transparent = yes
    discovered = yes
}

# This middlebox will be added by the server and ensures the reconnect
# the server sees will come from a different entity
middlebox {
    tag = mbox4
    address = tlmsp://localhost:10005
    transparent = no
    discovered = yes
}

client {
    address = tlmsp://localhost
}

server {
    address = tlmsp://localhost:10254
}
